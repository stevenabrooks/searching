<h1>Listing products</h1>

<%= search_form_for @q do |f| %>
  <%= f.condition_fields do |c| %>
  <div class="field">
    <%= c.attribute_fields do |a| %>
      <%= a.attribute_select %>
    <% end %>
    <%= c.predicate_select %>
    <%= c.value_fields do |v| %>
      <%= v.text_field :value %>
    <% end %>
  </div>
<% end %>  
  <div class="actions"><%= f.submit 'Search' %></div>
<% end %>

<table>
  <tr>
    <th><%= sort_link @q, :name, "Name" %></th>
    <th><%= sort_link @q, :system, "System" %></th>
    <th><%= sort_link @q, :grade, "Grade" %></th>
    <th><%= sort_link @q, :description, "Description" %></th>
    <th><%= sort_link @q, :price, "Price" %></th>
    <th></th>
  </tr>

<% @products.each do |product| %>
  <tr>
    <td><%= product.name %></td>
    <td><%= product.system %></td>
    <td><%= product.grade %></td>
    <td><%= product.description %></td>
    <td><%= product.price %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Product', new_product_path %>
